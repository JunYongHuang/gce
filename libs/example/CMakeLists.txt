#
# This file is part of the CMake build system for GCE
#
# Copyright (c) 2009-2014 Nous Xiong (348944179 at qq dot com)
#
# Distributed under the Boost Software License, Version 1.0. (See accompanying
# file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)
#
# See https://github.com/nousxiong/gce for latest version.
#

option (GCE_EXAMPLE_ALL "Build all gce examples" OFF)
option (GCE_EXAMPLE_CLUSTER "Build gce example - cluster" OFF)

set (LINK_LIBS ${Boost_LIBRARIES} ${CMAKE_THREAD_LIBS_INIT})
if (UNIX)
  set (LINK_LIBS ${LINK_LIBS} rt)
endif ()

# Not only x64 linux need this, but all linux gcc, we need this.
if (CMAKE_COMPILER_IS_GNUCXX AND NOT MINGW)
  add_definitions (-fPIC)
endif ()

if (GCE_STATIC)
  set (GCE_LINK_PROP "${GCE_LINK_PROP} -static -static-libgcc -static-libstdc++")
endif ()

# Example cluster(s).
if (GCE_EXAMPLE_ALL OR GCE_EXAMPLE_CLUSTER)
  if (${GCE_PACKER} EQUAL ${GCE_ADATA})
    add_subdirectory (cluster0)
    add_subdirectory (cluster1)
    add_subdirectory (cluster2)
    add_subdirectory (cluster)
  endif ()
endif ()
